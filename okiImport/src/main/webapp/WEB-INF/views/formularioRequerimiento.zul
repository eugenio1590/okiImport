
<zk xmlns:w="client" xmlns:n="native">
	<script src="/resources/js/scriptParaFechas.js" />
	<window id="winFormularioRequerimiento" title="Ingrese Su Requerimiento" border="normal" width="95%" sclass="btn-primary"
		apply="org.zkoss.bind.BindComposer"
		viewModel="@id('vm') @init('com.okiimport.app.mvvm.controladores.RegistrarRequerimientoViewModel')"
		form="@id('fx') @load(vm.requerimiento) @save(vm.requerimiento, before='registrar')" >
		
		<groupbox>
		<hbox>
			<vbox>
			<groupbox closable="false">
				<caption sclass="custom_caption" label="Datos Personales"/>
				<div>
					<grid>
						<columns>
							<column width="35%" align="right" />
							<column width="65%" />
							<column width="35%" align="right" />
							<column width="65%" />
						</columns>

						<rows>
							<row>
								<label value="Cedula/RIF: " />

								<textbox id="cedulaRif" width="80%"
									readonly="" mold="rounded" value="@bind(vm.cliente.cedula)"
									placeholder="Ej: J-40240537-5" maxlength="12"
									constraint="no empty:El Campo No Debe Estar Vacio" />


								<label value="Nombre/Razón Social: " />

								<textbox id="nombreRazonSocial"
									width="80%" readonly="" mold="rounded"
									value="@bind(vm.cliente.nombre)" placeholder="Ej: Empresa C.A"
									constraint="no empty:El Campo No Debe Estar Vacio" />
							</row>

							<row>

								<label value="Teléfono: " />

								<textbox id="telefono" width="80%"
									readonly="" mold="rounded" value="@bind(vm.cliente.telefono)"
									maxlength="11" placeholder="Ej: 02512552233"
									constraint="no empty,/.[0-9]+/:El campo no puede estar vacio, escriba un numero de telefono valido, ejemplo 02515555555" />


								<label value="E-mail:" />
								<textbox id="email" width="80%"
									readonly="" mold="rounded" value="@bind(vm.cliente.correo)"
									placeholder="Ej. fusa@gmail.com"
									constraint="no empty,/.+@.+\.[a-z]+/ :El campo no puede estar vacio, debe contener un correo valido Ej. fusa@gmail.com">
								</textbox>
							</row>


						</rows>
					</grid>
				</div>
			</groupbox>
			<groupbox closable="false">
				<caption sclass="custom_caption" label="Datos Vehiculo" />
						
							<groupbox id="tabDatosVehiculo" closable="false">
								<caption sclass="custom_caption" label="Datos Basicos" />

								<div>

									<grid>
										<columns>
											<column width="35%"
												align="right" />
											<column width="65%" />
											<column width="35%"
												align="right" />
											<column width="65%" />
										</columns>

										<rows>
											<row>
												<label value="Marca: " />
												<combobox
													placeholder="Seleccione..." width="80%" readonly="true"
													selectedItem="@bind(vm.requerimiento.marcaVehiculo)"
													model="@load(vm.listaMarcasVehiculo)">
													<template
														name="model">
														<comboitem
															label="@bind(each.nombre)">

														</comboitem>
													</template>
												</combobox>

												<label value="Modelo: " />

												<textbox id="modelo2"
													width="80%" readonly="" mold="rounded"
													value="@bind(vm.requerimiento.modeloV)" placeholder="Hilux"
													constraint="no empty:El Campo No Debe Estar Vacio" />
											</row>

											<row>

												<label
													value="Serial Carroceria: " />

												<textbox
													id="serialCarroceria2" width="80%" readonly=""
													mold="rounded"
													value="@bind(vm.requerimiento.serialCarroceriaV)"
													maxlength="11" placeholder="Ej: xA245D25623"
													constraint="no empty:El Campo No Debe Estar Vacio" />

												<label value="Año: " />
												<datebox width="80%" sclass="datebox-year-only"
            										format="yyyy" value="@bind(vm.requerimiento.annoV)"/>
            										
											</row>


										</rows>
									</grid>
								</div>
							</groupbox>

							<groupbox closable="false" id="tabMasDatosVehiculo">
								<caption sclass="custom_caption" label="Datos Adicionales" />

								<div>

									<grid>
										<columns>
											<column width="35%"
												align="right" />
											<column width="65%" />
											<column width="35%"
												align="right" />
											<column width="65%" />
										</columns>

										<rows>
											<row>
												<label value="Motor: " />
												<combobox
													selectedItem="@bind(vm.requerimiento.motor)" readonly="true"
													placeholder="Seleccione..." width="80%"
													model="@load(vm.listaMotor)">
													<template
														name="model">
														<comboitem
															label="@bind(each.nombre)">

														</comboitem>
													</template>
												</combobox>

												<label
													value="Transmision: " />
												<combobox
													placeholder="Seleccione..." width="80%" readonly="true"
													selectedItem="@bind(vm.transmision)" model="@load(vm.listaTransmision)">
													<template
														name="model">
														<comboitem
															label="@bind(each.nombre)">

														</comboitem>
													</template>
												</combobox>
											</row>

											<row>

												<label
													value="Traccion: " />
												<combobox
													placeholder="Seleccione..." width="80%" readonly="true"
													selectedItem="@bind(vm.traccion)" model="@load(vm.listaTraccion)">
													<template
														name="model">
														<comboitem
															label="@bind(each.nombre)">

														</comboitem>
													</template>
												</combobox>
											</row>


										</rows>
									</grid>
								</div>
							</groupbox>
			</groupbox>
			</vbox>
			<groupbox closable="false">
			<div align="right">
				<button label="Agregar Repuesto" type="submit"
					onClick="@command('agregarRepuesto')" sclass="btn-primary"/>
					<button label="Eliminar Repuesto" type="submit" sclass="btn-primary"
					onClick="@command('eliminarRepuesto')" />
					</div>
				<caption sclass="custom_caption" label="Datos Repuestos" />
				<panel sclass="panel-primary">
					<panelchildren>

						<listbox mold="paging" multiple="true" checkmark="true" selectedItems="@bind(vm.eliminarDetalle)"
							model="@load(vm.requerimiento.detalleRequerimientos)"
							style="margin-top:10px" pageSize="5">


							<listhead>
								<listheader label="CodigoOEM"
									sort="auto" width="140px" />
								<listheader label="Nombre" sort="auto" width="125px"/>
								<listheader label="Descripcion" width="150px"
									sort="auto" />
								<listheader label="Cantidad" width="80px"
									sort="auto" />
								<listheader label="Foto" sort="auto" width="100px"/>
							</listhead>
							<template name="model">
								<listitem>
									<listcell>
										<textbox width="110px"
											value="@bind(each.codigoOem)"
											constraint="no empty:El Campo No Debe Estar Vacio">
										</textbox>

									</listcell>
									<listcell>
										<textbox width="115px"
											value="@bind(each.nombre)"
											constraint="no empty:El Campo No Debe Estar Vacio">
										</textbox>
									</listcell>
									<listcell>
										<textbox width="135px"
											value="@bind(each.descripcion)"
											constraint="no empty:El Campo No Debe Estar Vacio">
										</textbox>
									</listcell>
									<listcell>
										<spinner width="70px" constraint="no empty,min 1 max 1000, /.[0-9]+/"
											value="@bind(each.cantidad)"
											>
										</spinner>
									</listcell>
									<listcell>
										<div>
											<image width="50px" height="50px" src="@bind(each.getFoto64())"  />
											
											<button label="..." sclass="btn-primary" style="margin-bottom:0px"
												upload="true" onUpload="@command('cambiarFoto', media=event.media, detalle = each)"/>
										</div>
									</listcell>
								</listitem>
							</template>
						</listbox>

					</panelchildren>
				</panel>

			</groupbox>
			</hbox>
		</groupbox>
		<div sclass="panel-footer" align="right">
			<button label="Limpiar" type="submit"
				onClick="@command('limpiar')" sclass="btn-primary"/>
			<button label="Enviar" type="submit"
				onClick="@command('registrar')" sclass="btn-primary"/>
		</div>
	</window>

</zk>
